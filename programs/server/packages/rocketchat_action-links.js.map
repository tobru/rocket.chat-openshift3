{"version":3,"sources":["meteor://ðŸ’»app/loadStylesheets.js","meteor://ðŸ’»app/server/registerActionLinkFuncts.js","meteor://ðŸ’»app/server/actionLinkHandler.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA,UAAU,CAAC,KAAK,CAAC,eAAe,CAAC,YAAW;AAC3C,QAAO,MAAM,CAAC,OAAO,CAAC,qCAAqC,CAAC,CAAC;CAC7D,CAAC,CAAC,8G;;;;;;;;;;;;;;;;;;;;ACAH,UAAU,CAAC,WAAW,GAAG;AACxB,SAAQ,EAAG,UAAS,IAAI,EAAE,KAAK,EAAE;AAChC,YAAU,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC;EACrC;CACD,CAAC,+G;;;;;;;;;;;;;;;;;;;;ACJF,MAAM,CAAC,OAAO,CAAC;AACd,kBAAiB,YAAC,IAAI,EAAE,SAAS,EAAE;AAClC,MAAI,CAAC,MAAM,CAAC,MAAM,EAAE,EAAE;AACrB,SAAM,IAAI,MAAM,CAAC,KAAK,CAAC,oBAAoB,EAAE,cAAc,EAAE,EAAE,MAAM,EAAE,mBAAmB,EAAE,CAAC,CAAC;GAC9F;;AAED,MAAI,OAAO,GAAG,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,SAAS,EAAE,CAAC,CAAC;AACrE,MAAI,CAAC,OAAO,EAAE;AACb,SAAM,IAAI,MAAM,CAAC,KAAK,CAAC,uBAAuB,EAAE,iBAAiB,EAAE,EAAE,MAAM,EAAE,mBAAmB,EAAE,CAAC,CAAC;GACpG;;AAED,MAAI,UAAU,GAAG,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;AAC3C,MAAI,CAAC,OAAO,CAAC,WAAW,IAAI,CAAC,UAAU,IAAI,CAAC,UAAU,CAAC,WAAW,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,UAAU,CAAC,SAAS,CAAC,EAAE;AACpH,SAAM,IAAI,MAAM,CAAC,KAAK,CAAC,0BAA0B,EAAE,qBAAqB,EAAE,EAAE,MAAM,EAAE,mBAAmB,EAAE,CAAC,CAAC;GAC3G;;AAED,MAAI,IAAI,GAAG,UAAU,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,OAAO,CAAC,GAAG,EAAE,CAAC,CAAC;AACjE,MAAI,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE;AAC3F,SAAM,IAAI,MAAM,CAAC,KAAK,CAAC,mBAAmB,EAAE,aAAa,EAAE,EAAE,MAAM,EAAE,mBAAmB,EAAE,CAAC,CAAC;GAC5F;;AAED,YAAU,CAAC,WAAW,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,OAAO,EAAE,UAAU,CAAC,MAAM,CAAC,CAAC;EACzE;CACD,CAAC,CAAC,8G","file":"/packages/rocketchat_action-links.js","sourcesContent":["RocketChat.theme.addPackageAsset(function() {\n\treturn Assets.getText('client/stylesheets/actionLinks.less');\n});\n","//Action Links namespace creation.\n\nRocketChat.actionLinks = {\n\tregister : function(name, funct) {\n\t\tRocketChat.actionLinks[name] = funct;\n\t}\n};\n","//Action Links Handler. This method will be called off the client.\n\nMeteor.methods({\n\tactionLinkHandler(name, messageId) {\n\t\tif (!Meteor.userId()) {\n\t\t\tthrow new Meteor.Error('error-invalid-user', 'Invalid user', { method: 'actionLinkHandler' });\n\t\t}\n\n\t\tvar message = RocketChat.models.Messages.findOne({ _id: messageId });\n\t\tif (!message) {\n\t\t\tthrow new Meteor.Error('error-invalid-message', 'Invalid message', { method: 'actionLinkHandler' });\n\t\t}\n\n\t\tvar actionLink = message.actionLinks[name];\n\t\tif (!message.actionLinks || !actionLink || !RocketChat.actionLinks || !RocketChat.actionLinks[actionLink.method_id]) {\n\t\t\tthrow new Meteor.Error('error-invalid-actionlink', 'Invalid action link', { method: 'actionLinkHandler' });\n\t\t}\n\n\t\tvar room = RocketChat.models.Rooms.findOne({ _id: message.rid });\n\t\tif (Array.isArray(room.usernames) && room.usernames.indexOf(Meteor.user().username) === -1) {\n\t\t\tthrow new Meteor.Error('error-not-allowed', 'Not allowed', { method: 'actionLinkHandler' });\n\t\t}\n\n\t\tRocketChat.actionLinks[actionLink.method_id](message, actionLink.params);\n\t}\n});\n"]}