{"version":3,"sources":["meteor://ðŸ’»app/packages/rocketchat_github-enterprise/common.coffee","meteor://ðŸ’»app/packages/rocketchat_github-enterprise/startup.coffee"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAEA;;AAAA,SACC;AAAA,aAAW,EAAX;AAAA,EACA,cAAc,cADd;AAAA,EAEA,eAAe,wBAFf;AAAA,EAGA,WAAW,2BAHX;AAAA,EAIA,sBACC;AAAA,qBAAiB,CAAC,4BAAD,CAAjB;AAAA,IACA,eAAe,CAAC,qCAAD,CADf;GALD;CADD;;AAAA,gBASA,GAAuB,gBAAY,mBAAZ,EAAiC,MAAjC,CATvB;;AAWA,IAAG,MAAM,CAAC,QAAV;AACC,QAAM,CAAC,OAAP,CAAe;WACd,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,QAA3B,CAAoC,2BAApC,CAAgE,CAAC,OAAjE,CACC;AAAA,aAAO,SAAC,MAAD;AACN,cAAM,CAAC,SAAP,GAAmB,UAAU,CAAC,QAAQ,CAAC,GAApB,CAAwB,2BAAxB,CAAnB;eACA,gBAAgB,CAAC,SAAjB,CAA2B,MAA3B,EAFM;MAAA,CAAP;AAAA,MAGA,SAAS,SAAC,MAAD;AACR,cAAM,CAAC,SAAP,GAAmB,UAAU,CAAC,QAAQ,CAAC,GAApB,CAAwB,2BAAxB,CAAnB;eACA,gBAAgB,CAAC,SAAjB,CAA2B,MAA3B,EAFQ;MAAA,CAHT;KADD,EADc;EAAA,CAAf,EADD;CAAA;AAUC,QAAM,CAAC,OAAP,CAAe;WACd,OAAO,CAAC,OAAR,CAAgB;AACf,UAAG,UAAU,CAAC,QAAQ,CAAC,GAApB,CAAwB,2BAAxB,CAAH;AACC,cAAM,CAAC,SAAP,GAAmB,UAAU,CAAC,QAAQ,CAAC,GAApB,CAAwB,2BAAxB,CAAnB;eACA,gBAAgB,CAAC,SAAjB,CAA2B,MAA3B,EAFD;OADe;IAAA,CAAhB,EADc;EAAA,CAAf,EAVD;CAXA;;;;;;;;;;;;;;;;;;;;ACFA,UAAU,CAAC,QAAQ,CAAC,QAApB,CAA6B,OAA7B,EAAsC;SACrC,IAAC,QAAD,CAAS,mBAAT,EAA8B;AAC7B;AAAA,kBAAc;AAAA,MAAC,KAAK,kCAAN;AAAA,MAA0C,OAAO,IAAjD;KAAd;AAAA,IACA,IAAC,IAAD,CAAK,kCAAL,EAAyC,KAAzC,EAAgD;AAAA,MAAC,MAAM,SAAP;KAAhD,CADA;AAAA,IAEA,IAAC,IAAD,CAAK,2BAAL,EAAkC,EAAlC,EAAsC;AAAA,MAAE,MAAM,QAAR;AAAA,MAAkB,UAAQ,IAA1B;AAAA,MAAgC,aAAa,WAA7C;AAAA,MAA0D,iBAAiB,uCAA3E;KAAtC,CAFA;AAAA,IAGA,IAAC,IAAD,CAAK,qCAAL,EAA4C,EAA5C,EAAgD;AAAA,MAAE,MAAM,QAAR;AAAA,MAAkB,aAAa,WAA/B;KAAhD,CAHA;AAAA,IAIA,IAAC,IAAD,CAAK,yCAAL,EAAgD,EAAhD,EAAoD;AAAA,MAAE,MAAM,QAAR;AAAA,MAAkB,aAAa,WAA/B;KAApD,CAJA;WAKA,IAAC,IAAD,CAAK,+CAAL,EAAsD,0BAAtD,EAAkF;AAAA,MAAE,MAAM,aAAR;AAAA,MAAuB,UAAU,IAAjC;AAAA,MAAuC,OAAO,IAA9C;AAAA,MAAoD,aAAa,WAAjE;KAAlF,EAN6B;EAAA,CAA9B,EADqC;AAAA,CAAtC","file":"/packages/rocketchat_github-enterprise.js","sourcesContent":["# GitHub Enterprise Server CallBack URL needs to be http(s)://{rocketchat.server}[:port]/_oauth/github_enterprise\n# In RocketChat -> Administration the URL needs to be http(s)://{github.enterprise.server}/\nconfig =\n\tserverURL: ''\n\tidentityPath: '/api/v3/user'\n\tauthorizePath: '/login/oauth/authorize'\n\ttokenPath: '/login/oauth/access_token'\n\taddAutopublishFields:\n\t\tforLoggedInUser: ['services.github-enterprise']\n\t\tforOtherUsers: ['services.github-enterprise.username']\n\nGitHubEnterprise = new CustomOAuth 'github_enterprise', config\n\nif Meteor.isServer\n\tMeteor.startup ->\n\t\tRocketChat.models.Settings.findById('API_GitHub_Enterprise_URL').observe\n\t\t\tadded: (record) ->\n\t\t\t\tconfig.serverURL = RocketChat.settings.get 'API_GitHub_Enterprise_URL'\n\t\t\t\tGitHubEnterprise.configure config\n\t\t\tchanged: (record) ->\n\t\t\t\tconfig.serverURL = RocketChat.settings.get 'API_GitHub_Enterprise_URL'\n\t\t\t\tGitHubEnterprise.configure config\nelse\n\tMeteor.startup ->\n\t\tTracker.autorun ->\n\t\t\tif RocketChat.settings.get 'API_GitHub_Enterprise_URL'\n\t\t\t\tconfig.serverURL = RocketChat.settings.get 'API_GitHub_Enterprise_URL'\n\t\t\t\tGitHubEnterprise.configure config\n","RocketChat.settings.addGroup 'OAuth', ->\n\t@section 'GitHub Enterprise', ->\n\t\tenableQuery = {_id: 'Accounts_OAuth_GitHub_Enterprise', value: true}\n\t\t@add 'Accounts_OAuth_GitHub_Enterprise', false, {type: 'boolean'}\n\t\t@add 'API_GitHub_Enterprise_URL', '', { type: 'string', public: true, enableQuery: enableQuery, i18nDescription: 'API_GitHub_Enterprise_URL_Description' }\n\t\t@add 'Accounts_OAuth_GitHub_Enterprise_id', '', { type: 'string', enableQuery: enableQuery }\n\t\t@add 'Accounts_OAuth_GitHub_Enterprise_secret', '', { type: 'string', enableQuery: enableQuery }\n\t\t@add 'Accounts_OAuth_GitHub_Enterprise_callback_url', '_oauth/github_enterprise', { type: 'relativeUrl', readonly: true, force: true, enableQuery: enableQuery }\n"]}