{"version":3,"sources":["meteor://ðŸ’»app/packages/rocketchat_mentions-flextab/server/publications/mentionedMessages.coffee"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA,MAAM,CAAC,OAAP,CAAe,mBAAf,EAAoC,SAAC,GAAD,EAAM,KAAN;AACnC;;IADyC,QAAM;GAC/C;AAAA,WAAW,CAAC,MAAZ;AACC,WAAO,IAAI,CAAC,KAAL,EAAP,CADD;GAAA;AAAA,EAGA,cAAc,IAHd;AAAA,EAKA,OAAO,UAAU,CAAC,MAAM,CAAC,KAAK,CAAC,WAAxB,CAAoC,IAAI,CAAC,MAAzC,CALP;AAMA;AACC,WAAO,IAAI,CAAC,KAAL,EAAP,CADD;GANA;AAAA,EASA,eAAe,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,6BAA3B,CAAyD,IAAI,CAAC,QAA9D,EAAwE,GAAxE,EAA6E;AAAA,IAAE,MAAM;AAAA,MAAE,IAAI,EAAN;KAAR;AAAA,IAAoB,OAAO,KAA3B;GAA7E,CAAgH,CAAC,cAAjH,CACd;AAAA,WAAO,SAAC,GAAD,EAAM,MAAN;AACN,YAAM,CAAC,aAAP,GAAuB,IAAvB;aACA,WAAW,CAAC,KAAZ,CAAkB,8BAAlB,EAAkD,GAAlD,EAAuD,MAAvD,EAFM;IAAA,CAAP;AAAA,IAIA,SAAS,SAAC,GAAD,EAAM,MAAN;AACR,YAAM,CAAC,aAAP,GAAuB,IAAvB;aACA,WAAW,CAAC,OAAZ,CAAoB,8BAApB,EAAoD,GAApD,EAAyD,MAAzD,EAFQ;IAAA,CAJT;AAAA,IAQA,SAAS,SAAC,GAAD;aACR,WAAW,CAAC,OAAZ,CAAoB,8BAApB,EAAoD,GAApD,EADQ;IAAA,CART;GADc,CATf;AAAA,EAqBA,IAAC,MAAD,EArBA;SAsBA,IAAC,OAAD,CAAQ;WACP,YAAY,CAAC,IAAb,GADO;EAAA,CAAR,EAvBmC;AAAA,CAApC","file":"/packages/rocketchat_mentions-flextab.js","sourcesContent":["Meteor.publish 'mentionedMessages', (rid, limit=50) ->\n\tunless this.userId\n\t\treturn this.ready()\n\n\tpublication = @\n\n\tuser = RocketChat.models.Users.findOneById this.userId\n\tunless user\n\t\treturn this.ready()\n\n\tcursorHandle = RocketChat.models.Messages.findVisibleByMentionAndRoomId(user.username, rid, { sort: { ts: -1 }, limit: limit }).observeChanges\n\t\tadded: (_id, record) ->\n\t\t\trecord.mentionedList = true\n\t\t\tpublication.added('rocketchat_mentioned_message', _id, record)\n\n\t\tchanged: (_id, record) ->\n\t\t\trecord.mentionedList = true\n\t\t\tpublication.changed('rocketchat_mentioned_message', _id, record)\n\n\t\tremoved: (_id) ->\n\t\t\tpublication.removed('rocketchat_mentioned_message', _id)\n\n\t@ready()\n\t@onStop ->\n\t\tcursorHandle.stop()\n"]}