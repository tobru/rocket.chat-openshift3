{"version":3,"sources":["meteor://ðŸ’»app/packages/rocketchat_slashcommands-mute/server/mute.coffee","meteor://ðŸ’»app/packages/rocketchat_slashcommands-mute/server/unmute.coffee"],"names":[],"mappings":"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","file":"/packages/rocketchat_slashcommands-mute.js","sourcesContent":["###\n# Mute is a named function that will replace /mute commands\n###\n\nclass Mute\n\tconstructor: (command, params, item) ->\n\t\tif command isnt 'mute' or not Match.test params, String\n\t\t\treturn\n\n\t\tusername = params.trim()\n\t\tif username is ''\n\t\t\treturn\n\n\t\tusername = username.replace('@', '')\n\n\t\tuser = Meteor.users.findOne Meteor.userId()\n\t\tmutedUser = RocketChat.models.Users.findOneByUsername username\n\t\troom = RocketChat.models.Rooms.findOneById item.rid\n\n\t\tif not mutedUser?\n\t\t\tRocketChat.Notifications.notifyUser Meteor.userId(), 'message', {\n\t\t\t\t_id: Random.id()\n\t\t\t\trid: item.rid\n\t\t\t\tts: new Date\n\t\t\t\tmsg: TAPi18n.__('Username_doesnt_exist', { postProcess: 'sprintf', sprintf: [ username ] }, user.language);\n\t\t\t}\n\t\t\treturn\n\n\t\tif username not in (room.usernames or [])\n\t\t\tRocketChat.Notifications.notifyUser Meteor.userId(), 'message', {\n\t\t\t\t_id: Random.id()\n\t\t\t\trid: item.rid\n\t\t\t\tts: new Date\n\t\t\t\tmsg: TAPi18n.__('Username_is_not_in_this_room', { postProcess: 'sprintf', sprintf: [ username ] }, user.language);\n\t\t\t}\n\t\t\treturn\n\n\t\tMeteor.call 'muteUserInRoom', { rid: item.rid, username: username }\n\nRocketChat.slashCommands.add 'mute', Mute\n","###\n# Unmute is a named function that will replace /unmute commands\n###\n\nclass Unmute\n\tconstructor: (command, params, item) ->\n\t\tif command isnt 'unmute' or not Match.test params, String\n\t\t\treturn\n\n\t\tusername = params.trim()\n\t\tif username is ''\n\t\t\treturn\n\n\t\tusername = username.replace('@', '')\n\n\t\tuser = Meteor.users.findOne Meteor.userId()\n\t\tunmutedUser = RocketChat.models.Users.findOneByUsername username\n\t\troom = RocketChat.models.Rooms.findOneById item.rid\n\n\t\tif not unmutedUser?\n\t\t\tRocketChat.Notifications.notifyUser Meteor.userId(), 'message', {\n\t\t\t\t_id: Random.id()\n\t\t\t\trid: item.rid\n\t\t\t\tts: new Date\n\t\t\t\tmsg: TAPi18n.__('Username_doesnt_exist', { postProcess: 'sprintf', sprintf: [ username ] }, user.language);\n\t\t\t}\n\t\t\treturn\n\n\t\tif username not in (room.usernames or [])\n\t\t\tRocketChat.Notifications.notifyUser Meteor.userId(), 'message', {\n\t\t\t\t_id: Random.id()\n\t\t\t\trid: item.rid\n\t\t\t\tts: new Date\n\t\t\t\tmsg: TAPi18n.__('Username_is_not_in_this_room', { postProcess: 'sprintf', sprintf: [ username ] }, user.language);\n\t\t\t}\n\t\t\treturn\n\n\t\tMeteor.call 'unmuteUserInRoom', { rid: item.rid, username: username }\n\nRocketChat.slashCommands.add 'unmute', Unmute\n"]}