{"version":3,"sources":["meteor://ðŸ’»app/lib/ev.js","meteor://ðŸ’»app/server/server.js"],"names":[],"mappings":"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","file":"/packages/rocketchat_streamer.js","sourcesContent":["/* globals EV:true */\n/* exported EV */\n\nEV = class EV {\n\tconstructor() {\n\t\tthis.handlers = {};\n\t}\n\n\temit(event, ...args) {\n\t\tif (this.handlers[event]) {\n\t\t\tthis.handlers[event].forEach((handler) => handler.apply(this, args));\n\t\t}\n\t}\n\n\temitWithScope(event, scope, ...args) {\n\t\tif (this.handlers[event]) {\n\t\t\tthis.handlers[event].forEach((handler) => handler.apply(scope, args));\n\t\t}\n\t}\n\n\ton(event, callback) {\n\t\tif (!this.handlers[event]) {\n\t\t\tthis.handlers[event] = [];\n\t\t}\n\t\tthis.handlers[event].push(callback);\n\t}\n\n\tonce(event, callback) {\n\t\tself = this;\n\t\tself.on(event, function onetimeCallback() {\n\t\t\tcallback.apply(this, arguments);\n\t\t\tself.removeListener(event, onetimeCallback);\n\t\t});\n\t}\n\n\tremoveListener(event, callback) {\n\t\tif(this.handlers[event]) {\n\t\t\tconst index = this.handlers[event].indexOf(callback);\n\t\t\tif (index > -1) {\n\t\t\t\tthis.handlers[event].splice(index, 1);\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveAllListeners(event) {\n\t\tthis.handlers[event] = undefined;\n\t}\n};\n","/* globals EV */\n/* eslint new-cap: false */\n\nclass StreamerCentral extends EV {\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.instances = {};\n\t}\n}\n\nMeteor.StreamerCentral = new StreamerCentral;\n\n\nMeteor.Streamer = class Streamer extends EV {\n\tconstructor(name, {retransmit = true, retransmitToSelf = false} = {}) {\n\t\tif (Meteor.StreamerCentral.instances[name]) {\n\t\t\tconsole.warn('Streamer instance already exists:', name);\n\t\t\treturn Meteor.StreamerCentral.instances[name];\n\t\t}\n\n\t\tsuper();\n\n\t\tMeteor.StreamerCentral.instances[name] = this;\n\n\t\tthis.name = name;\n\t\tthis.retransmit = retransmit;\n\t\tthis.retransmitToSelf = retransmitToSelf;\n\n\t\tthis.subscriptions = [];\n\t\tthis.subscriptionsByEventName = {};\n\t\tthis.transformers = {};\n\n\t\tthis.iniPublication();\n\t\tthis.initMethod();\n\n\t\tthis._allowRead = {};\n\t\tthis._allowEmit = {};\n\t\tthis._allowWrite = {};\n\n\t\tthis.allowRead('none');\n\t\tthis.allowEmit('all');\n\t\tthis.allowWrite('none');\n\t}\n\n\tget name() {\n\t\treturn this._name;\n\t}\n\n\tset name(name) {\n\t\tcheck(name, String);\n\t\tthis._name = name;\n\t}\n\n\tget subscriptionName() {\n\t\treturn `stream-${this.name}`;\n\t}\n\n\tget retransmit() {\n\t\treturn this._retransmit;\n\t}\n\n\tset retransmit(retransmit) {\n\t\tcheck(retransmit, Boolean);\n\t\tthis._retransmit = retransmit;\n\t}\n\n\tget retransmitToSelf() {\n\t\treturn this._retransmitToSelf;\n\t}\n\n\tset retransmitToSelf(retransmitToSelf) {\n\t\tcheck(retransmitToSelf, Boolean);\n\t\tthis._retransmitToSelf = retransmitToSelf;\n\t}\n\n\tallowRead(eventName, fn) {\n\t\tif (fn === undefined) {\n\t\t\tfn = eventName;\n\t\t\teventName = '__all__';\n\t\t}\n\n\t\tif (typeof fn === 'function') {\n\t\t\treturn this._allowRead[eventName] = fn;\n\t\t}\n\n\t\tif (typeof fn === 'string' && ['all', 'none', 'logged'].indexOf(fn) === -1) {\n\t\t\tconsole.error(`allowRead shortcut '${fn}' is invalid`);\n\t\t}\n\n\t\tif (fn === 'all' || fn === true) {\n\t\t\treturn this._allowRead[eventName] = function() {\n\t\t\t\treturn true;\n\t\t\t};\n\t\t}\n\n\t\tif (fn === 'none' || fn === false) {\n\t\t\treturn this._allowRead[eventName] = function() {\n\t\t\t\treturn false;\n\t\t\t};\n\t\t}\n\n\t\tif (fn === 'logged') {\n\t\t\treturn this._allowRead[eventName] = function() {\n\t\t\t\treturn Boolean(this.userId);\n\t\t\t};\n\t\t}\n\t}\n\n\tallowEmit(eventName, fn) {\n\t\tif (fn === undefined) {\n\t\t\tfn = eventName;\n\t\t\teventName = '__all__';\n\t\t}\n\n\t\tif (typeof fn === 'function') {\n\t\t\treturn this._allowEmit[eventName] = fn;\n\t\t}\n\n\t\tif (typeof fn === 'string' && ['all', 'none', 'logged'].indexOf(fn) === -1) {\n\t\t\tconsole.error(`allowRead shortcut '${fn}' is invalid`);\n\t\t}\n\n\t\tif (fn === 'all' || fn === true) {\n\t\t\treturn this._allowEmit[eventName] = function() {\n\t\t\t\treturn true;\n\t\t\t};\n\t\t}\n\n\t\tif (fn === 'none' || fn === false) {\n\t\t\treturn this._allowEmit[eventName] = function() {\n\t\t\t\treturn false;\n\t\t\t};\n\t\t}\n\n\t\tif (fn === 'logged') {\n\t\t\treturn this._allowEmit[eventName] = function() {\n\t\t\t\treturn Boolean(this.userId);\n\t\t\t};\n\t\t}\n\t}\n\n\tallowWrite(eventName, fn) {\n\t\tif (fn === undefined) {\n\t\t\tfn = eventName;\n\t\t\teventName = '__all__';\n\t\t}\n\n\t\tif (typeof fn === 'function') {\n\t\t\treturn this._allowWrite[eventName] = fn;\n\t\t}\n\n\t\tif (typeof fn === 'string' && ['all', 'none', 'logged'].indexOf(fn) === -1) {\n\t\t\tconsole.error(`allowWrite shortcut '${fn}' is invalid`);\n\t\t}\n\n\t\tif (fn === 'all' || fn === true) {\n\t\t\treturn this._allowWrite[eventName] = function() {\n\t\t\t\treturn true;\n\t\t\t};\n\t\t}\n\n\t\tif (fn === 'none' || fn === false) {\n\t\t\treturn this._allowWrite[eventName] = function() {\n\t\t\t\treturn false;\n\t\t\t};\n\t\t}\n\n\t\tif (fn === 'logged') {\n\t\t\treturn this._allowWrite[eventName] = function() {\n\t\t\t\treturn Boolean(this.userId);\n\t\t\t};\n\t\t}\n\t}\n\n\tisReadAllowed(scope, eventName) {\n\t\tif (this._allowRead[eventName]) {\n\t\t\treturn this._allowRead[eventName].call(scope, eventName);\n\t\t}\n\n\t\treturn this._allowRead['__all__'].call(scope, eventName);\n\t}\n\n\tisEmitAllowed(scope, eventName, ...args) {\n\t\tif (this._allowEmit[eventName]) {\n\t\t\treturn this._allowEmit[eventName].call(scope, eventName, ...args);\n\t\t}\n\n\t\treturn this._allowEmit['__all__'].call(scope, eventName, ...args);\n\t}\n\n\tisWriteAllowed(scope, eventName, args) {\n\t\tif (this._allowWrite[eventName]) {\n\t\t\treturn this._allowWrite[eventName].call(scope, eventName, ...args);\n\t\t}\n\n\t\treturn this._allowWrite['__all__'].call(scope, eventName, ...args);\n\t}\n\n\taddSubscription(subscription, eventName) {\n\t\tthis.subscriptions.push(subscription);\n\n\t\tif (!this.subscriptionsByEventName[eventName]) {\n\t\t\tthis.subscriptionsByEventName[eventName] = [];\n\t\t}\n\n\t\tthis.subscriptionsByEventName[eventName].push(subscription);\n\t}\n\n\tremoveSubscription(subscription, eventName) {\n\t\tconst index = this.subscriptions.indexOf(subscription);\n\t\tif (index > -1) {\n\t\t\tthis.subscriptions.splice(index, 1);\n\t\t}\n\n\t\tif (this.subscriptionsByEventName[eventName]) {\n\t\t\tconst index = this.subscriptionsByEventName[eventName].indexOf(subscription);\n\t\t\tif (index > -1) {\n\t\t\t\tthis.subscriptionsByEventName[eventName].splice(index, 1);\n\t\t\t}\n\t\t}\n\t}\n\n\ttransform(eventName, fn) {\n\t\tif (typeof eventName === 'function') {\n\t\t\tfn = eventName;\n\t\t\teventName = '__all__';\n\t\t}\n\n\t\tif (!this.transformers[eventName]) {\n\t\t\tthis.transformers[eventName] = [];\n\t\t}\n\n\t\tthis.transformers[eventName].push(fn);\n\t}\n\n\tapplyTransformers(methodScope, eventName, args) {\n\t\tif (this.transformers['__all__']) {\n\t\t\tthis.transformers['__all__'].forEach((transform) => {\n\t\t\t\targs = transform.call(methodScope, eventName, args);\n\t\t\t\tmethodScope.tranformed = true;\n\t\t\t\tif (!Array.isArray(args)) {\n\t\t\t\t\targs = [args];\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (this.transformers[eventName]) {\n\t\t\tthis.transformers[eventName].forEach((transform) => {\n\t\t\t\targs = transform.call(methodScope, ...args);\n\t\t\t\tmethodScope.tranformed = true;\n\t\t\t\tif (!Array.isArray(args)) {\n\t\t\t\t\targs = [args];\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn args;\n\t}\n\n\tiniPublication() {\n\t\tconst stream = this;\n\t\tMeteor.publish(this.subscriptionName, function(eventName, useCollection) {\n\t\t\tcheck(eventName, String);\n\t\t\tcheck(useCollection, Match.Optional(Boolean));\n\n\t\t\tif (eventName.length === 0) {\n\t\t\t\tthis.stop();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (stream.isReadAllowed(this, eventName) !== true) {\n\t\t\t\tthis.stop();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst subscription = {\n\t\t\t\tsubscription: this,\n\t\t\t\teventName: eventName\n\t\t\t};\n\n\t\t\tstream.addSubscription(subscription, eventName);\n\n\t\t\tthis.onStop(() => {\n\t\t\t\tstream.removeSubscription(subscription, eventName);\n\t\t\t});\n\n\t\t\tif (useCollection === true) {\n\t\t\t\t// Collection compatibility\n\t\t\t\tthis._session.sendAdded(stream.subscriptionName, 'id', {\n\t\t\t\t\teventName: eventName\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.ready();\n\t\t});\n\t}\n\n\tinitMethod() {\n\t\tconst stream = this;\n\t\tconst method = {};\n\n\t\tmethod[this.subscriptionName] = function(eventName, ...args) {\n\t\t\tcheck(eventName, String);\n\t\t\tcheck(args, Array);\n\n\t\t\tthis.unblock();\n\n\t\t\tif (stream.isWriteAllowed(this, eventName, args) !== true) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst methodScope = {\n\t\t\t\tuserId: this.userId,\n\t\t\t\tconnection: this.connection,\n\t\t\t\toriginalParams: args,\n\t\t\t\ttranformed: false\n\t\t\t};\n\n\t\t\targs = stream.applyTransformers(methodScope, eventName, args);\n\n\t\t\tstream.emitWithScope(eventName, methodScope, ...args);\n\n\t\t\tif (stream.retransmit === true) {\n\t\t\t\tstream._emit(eventName, args, this.connection, true);\n\t\t\t}\n\t\t};\n\n\t\ttry {\n\t\t\tMeteor.methods(method);\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t}\n\t}\n\n\t_emit(eventName, args, origin, broadcast) {\n\t\tif (broadcast === true) {\n\t\t\tMeteor.StreamerCentral.emit('broadcast', this.name, eventName, args);\n\t\t}\n\n\t\tconst subscriptions = this.subscriptionsByEventName[eventName];\n\t\tif (!Array.isArray(subscriptions)) {\n\t\t\treturn;\n\t\t}\n\n\t\tsubscriptions.forEach((subscription) => {\n\t\t\tif (this.retransmitToSelf === false && origin && origin === subscription.subscription.connection) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.isEmitAllowed(subscription.subscription, eventName, ...args)) {\n\t\t\t\tsubscription.subscription._session.sendChanged(this.subscriptionName, 'id', {\n\t\t\t\t\teventName: eventName,\n\t\t\t\t\targs: args\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\temit(eventName, ...args) {\n\t\tthis._emit(eventName, args, undefined, true);\n\t}\n\n\temitWithoutBroadcast(eventName, ...args) {\n\t\tthis._emit(eventName, args, undefined, false);\n\t}\n};\n"]}