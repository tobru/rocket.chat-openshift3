{"version":3,"sources":["meteor://ðŸ’»app/packages/rocketchat_tutum/startup.coffee"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;;;;;GAAA;AAAA;;AAOA,IAAG,0CAAH;AACC,UAAQ,GAAG,CAAC,OAAJ,CAAY,OAAZ,CAAR;AAAA,EAEA,SAAS,KAAK,CAAC,YAAN,CAAmB,OAAO,CAAC,GAAG,CAAC,sBAA/B,CAFT;AAAA,EAIA,MAAM,CAAC,EAAP,CAAU,OAAV,EAAmB,SAAC,GAAD;WAClB,OAAO,CAAC,GAAR,CAAY,gBAAZ,EAA8B,GAA9B,EADkB;EAAA,CAAnB,CAJA;AAAA,EAOA,MAAM,CAAC,GAAP,CAAW,cAAY,OAAO,CAAC,GAAG,CAAC,uBAAnC,CAPA;AAAA,EAQA,MAAM,CAAC,KAAP,CAAa,cAAY,OAAO,CAAC,GAAG,CAAC,uBAArC,EAAgE,OAAO,CAAC,GAAG,CAAC,uBAA5E,CARA;AAAA,EAUA,OAAO,OAAO,CAAC,GAAG,CAAC,IAAZ,IAAoB,IAV3B;AAAA,EAWA,MAAM,CAAC,KAAP,CAAa,cAAY,OAAO,CAAC,GAAG,CAAC,uBAArC,EAAgE,YAAS,CAAC,OAAO,CAAC,GAAG,CAAC,sBAAsB,CAAC,KAAnC,CAAyC,GAAzC,CAA8C,GAA/C,CAAT,GAA2D,GAA3D,GAA8D,IAA9H,CAXA;AAAA,EAcA,OAAO,CAAC,EAAR,CAAW,SAAX,EAAsB;WACrB,MAAM,CAAC,MAAP,CAAc,cAAY,OAAO,CAAC,GAAG,CAAC,uBAAtC,EAAiE,EAAjE,EADqB;EAAA,CAAtB,CAdA;AAAA,EAiBA,OAAO,CAAC,EAAR,CAAW,QAAX,EAAqB;WACpB,MAAM,CAAC,MAAP,CAAc,cAAY,OAAO,CAAC,GAAG,CAAC,uBAAtC,EAAiE,EAAjE,EADoB;EAAA,CAArB,CAjBA,CADD;CAPA","file":"/packages/rocketchat_tutum.js","sourcesContent":["### Examples\n\nDOCKERCLOUD_REDIS_HOST=redis://:password@host:6379\nDOCKERCLOUD_CLIENT_NAME=mywebsite\nDOCKERCLOUD_CLIENT_HOST=mywebsite.dotcloud.com\n###\n\nif process.env.DOCKERCLOUD_REDIS_HOST?\n\tredis = Npm.require 'redis'\n\n\tclient = redis.createClient(process.env.DOCKERCLOUD_REDIS_HOST)\n\n\tclient.on 'error', (err) ->\n\t\tconsole.log 'Redis error ->', err\n\n\tclient.del(\"frontend:#{process.env.DOCKERCLOUD_CLIENT_HOST}\")\n\tclient.rpush(\"frontend:#{process.env.DOCKERCLOUD_CLIENT_HOST}\", process.env.DOCKERCLOUD_CLIENT_NAME)\n\n\tport = process.env.PORT || 3000\n\tclient.rpush(\"frontend:#{process.env.DOCKERCLOUD_CLIENT_HOST}\", \"http://#{process.env.DOCKERCLOUD_IP_ADDRESS.split('/')[0]}:#{port}\")\n\n\t# removes the redis entry in 90 seconds on a SIGTERM\n\tprocess.on 'SIGTERM', ->\n\t\tclient.expire(\"frontend:#{process.env.DOCKERCLOUD_CLIENT_HOST}\", 90)\n\n\tprocess.on 'SIGINT', ->\n\t\tclient.expire(\"frontend:#{process.env.DOCKERCLOUD_CLIENT_HOST}\", 90)\n"]}