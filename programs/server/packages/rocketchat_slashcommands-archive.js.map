{"version":3,"sources":["meteor://ðŸ’»app/messages.js","meteor://ðŸ’»app/server.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,iCAAiC,GAAG,UAAS,MAAM,EAAE,IAAI,EAAE;AACrF,QAAO,IAAI,CAAC,kCAAkC,CAAC,eAAe,EAAE,MAAM,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC;CAClF,CAAC,yF;;;;;;;;;;;;;;;;;;ACFF,SAAS,OAAO,CAAC,OAAO,EAAE,MAAM,EAAE,IAAI,EAAE;AACvC,KAAI,OAAO,EAAE,IAAI,EAAE,IAAI,CAAC;AACxB,KAAI,OAAO,KAAK,SAAS,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,MAAM,CAAC,EAAE;AACzD,SAAO;EACP;AACD,QAAO,GAAG,MAAM,CAAC,IAAI,EAAE,CAAC;AACxB,KAAI,OAAO,KAAK,EAAE,EAAE;AACnB,MAAI,GAAG,UAAU,CAAC,MAAM,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AACrD,SAAO,GAAG,IAAI,CAAC,IAAI,CAAC;EACpB,MAAM;AACN,SAAO,GAAG,OAAO,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;AACnC,MAAI,GAAG,UAAU,CAAC,MAAM,CAAC,KAAK,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;EACtD;AACD,KAAI,GAAG,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,CAAC;;AAE7C,KAAI,IAAI,CAAC,QAAQ,EAAE;AAClB,YAAU,CAAC,aAAa,CAAC,UAAU,CAAC,MAAM,CAAC,MAAM,EAAE,EAAE,SAAS,EAAE;AAC/D,MAAG,EAAE,MAAM,CAAC,EAAE,EAAE;AAChB,MAAG,EAAE,IAAI,CAAC,GAAG;AACb,KAAE,EAAE,IAAI,IAAI,EAAE;AACd,MAAG,EAAE,OAAO,CAAC,EAAE,CAAC,iCAAiC,EAAE;AAClD,eAAW,EAAE,SAAS;AACtB,WAAO,EAAE,CAAC,OAAO,CAAC;IAClB,EAAE,IAAI,CAAC,QAAQ,CAAC;GACjB,CAAC,CAAC;AACH,SAAO;EACP;AACD,OAAM,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;;AAErC,WAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,iCAAiC,CAAC,IAAI,CAAC,GAAG,EAAE,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC;AACtF,WAAU,CAAC,aAAa,CAAC,UAAU,CAAC,MAAM,CAAC,MAAM,EAAE,EAAE,SAAS,EAAE;AAC/D,KAAG,EAAE,MAAM,CAAC,EAAE,EAAE;AAChB,KAAG,EAAE,IAAI,CAAC,GAAG;AACb,IAAE,EAAE,IAAI,IAAI,EAAE;AACd,KAAG,EAAE,OAAO,CAAC,EAAE,CAAC,kBAAkB,EAAE;AACnC,cAAW,EAAE,SAAS;AACtB,UAAO,EAAE,CAAC,OAAO,CAAC;GAClB,EAAE,IAAI,CAAC,QAAQ,CAAC;EACjB,CAAC,CAAC;;AAEH,QAAO,OAAO,CAAC;CACf;;AAED,UAAU,CAAC,aAAa,CAAC,GAAG,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC,6C","file":"/packages/rocketchat_slashcommands-archive.js","sourcesContent":["RocketChat.models.Messages.createRoomArchivedByRoomIdAndUser = function(roomId, user) {\n\treturn this.createWithTypeRoomIdMessageAndUser('room-archived', roomId, '', user);\n};\n","function Archive(command, params, item) {\n\tvar channel, room, user;\n\tif (command !== 'archive' || !Match.test(params, String)) {\n\t\treturn;\n\t}\n\tchannel = params.trim();\n\tif (channel === '') {\n\t\troom = RocketChat.models.Rooms.findOneById(item.rid);\n\t\tchannel = room.name;\n\t} else {\n\t\tchannel = channel.replace('#', '');\n\t\troom = RocketChat.models.Rooms.findOneByName(channel);\n\t}\n\tuser = Meteor.users.findOne(Meteor.userId());\n\n\tif (room.archived) {\n\t\tRocketChat.Notifications.notifyUser(Meteor.userId(), 'message', {\n\t\t\t_id: Random.id(),\n\t\t\trid: item.rid,\n\t\t\tts: new Date(),\n\t\t\tmsg: TAPi18n.__('Duplicate_archived_channel_name', {\n\t\t\t\tpostProcess: 'sprintf',\n\t\t\t\tsprintf: [channel]\n\t\t\t}, user.language)\n\t\t});\n\t\treturn;\n\t}\n\tMeteor.call('archiveRoom', room._id);\n\n\tRocketChat.models.Messages.createRoomArchivedByRoomIdAndUser(room._id, Meteor.user());\n\tRocketChat.Notifications.notifyUser(Meteor.userId(), 'message', {\n\t\t_id: Random.id(),\n\t\trid: item.rid,\n\t\tts: new Date(),\n\t\tmsg: TAPi18n.__('Channel_Archived', {\n\t\t\tpostProcess: 'sprintf',\n\t\t\tsprintf: [channel]\n\t\t}, user.language)\n\t});\n\n\treturn Archive;\n}\n\nRocketChat.slashCommands.add('archive', Archive);\n"]}