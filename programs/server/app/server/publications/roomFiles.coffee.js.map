{"version":3,"sources":["meteor://ðŸ’»app/server/publications/roomFiles.coffee"],"names":[],"mappings":";;;;;;;;;AAAA,MAAM,CAAC,OAAP,CAAe,WAAf,EAA4B,SAAC,GAAD,EAAM,KAAN;AAC3B;;IADiC,QAAQ;GACzC;AAAA,WAAW,CAAC,MAAZ;AACC,WAAO,IAAI,CAAC,KAAL,EAAP,CADD;GAAA;AAAA,EAGA,MAAM,IAHN;AAAA,EAKA,uBAAuB,UAAU,CAAC,MAAM,CAAC,OAAO,CAAC,wBAA1B,CAAmD,GAAnD,EAAwD,KAAxD,CAA8D,CAAC,cAA/D,CACtB;AAAA,WAAO,SAAC,GAAD,EAAM,MAAN;aACN,GAAG,CAAC,KAAJ,CAAU,YAAV,EAAwB,GAAxB,EAA6B,MAA7B,EADM;IAAA,CAAP;AAAA,IAGA,SAAS,SAAC,GAAD,EAAM,MAAN;aACR,GAAG,CAAC,OAAJ,CAAY,YAAZ,EAA0B,GAA1B,EAA+B,MAA/B,EADQ;IAAA,CAHT;AAAA,IAMA,SAAS,SAAC,GAAD,EAAM,MAAN;aACR,GAAG,CAAC,OAAJ,CAAY,YAAZ,EAA0B,GAA1B,EAA+B,MAA/B,EADQ;IAAA,CANT;GADsB,CALvB;AAAA,EAeA,IAAI,CAAC,KAAL,EAfA;SAgBA,IAAI,CAAC,MAAL,CAAY;WACX,oBAAoB,CAAC,IAArB,GADW;EAAA,CAAZ,EAjB2B;AAAA,CAA5B","file":"/server/publications/roomFiles.coffee.js","sourcesContent":["Meteor.publish 'roomFiles', (rid, limit = 50) ->\n\tunless this.userId\n\t\treturn this.ready()\n\n\tpub = this\n\n\tcursorFileListHandle = RocketChat.models.Uploads.findNotHiddenFilesOfRoom(rid, limit).observeChanges\n\t\tadded: (_id, record) ->\n\t\t\tpub.added('room_files', _id, record)\n\n\t\tchanged: (_id, record) ->\n\t\t\tpub.changed('room_files', _id, record)\n\n\t\tremoved: (_id, record) ->\n\t\t\tpub.removed('room_files', _id, record)\n\n\tthis.ready()\n\tthis.onStop ->\n\t\tcursorFileListHandle.stop()\n"]}