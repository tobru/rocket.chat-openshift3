{"version":3,"sources":["meteor://ðŸ’»app/server/publications/filteredUsers.coffee"],"names":[],"mappings":";;;;;;;;;AAAA,MAAM,CAAC,OAAP,CAAe,eAAf,EAAgC,SAAC,MAAD;AAC/B;AAAA,WAAW,CAAC,MAAZ;AACC,WAAO,IAAI,CAAC,KAAL,EAAP,CADD;GAAA;AAGA,MAAG,EAAK,CAAC,QAAF,CAAW,MAAX,CAAP;AACC,WAAO,IAAI,CAAC,KAAL,EAAP,CADD;GAHA;AAAA,EAMA,MAAU,WAAO,CAAC,CAAC,YAAF,CAAe,MAAM,CAAC,IAAtB,CAAP,EAAoC,GAApC,CANV;AAAA,EAQA,UACC;AAAA,YACC;AAAA,gBAAU,CAAV;KADD;AAAA,IAEA,MACC;AAAA,gBAAU,CAAV;KAHD;AAAA,IAIA,OAAO,CAJP;GATD;AAAA,EAeA,MAAM,IAfN;AAAA,EAiBA,eAAe,UAAU,CAAC,MAAM,CAAC,KAAK,CAAC,+BAAxB,CAAwD,GAAxD,EAA6D,MAAM,CAAC,MAApE,EAA4E,OAA5E,CAAoF,CAAC,cAArF,CACd;AAAA,WAAO,SAAC,GAAD,EAAM,MAAN;aACN,GAAG,CAAC,KAAJ,CAAU,gBAAV,EAA4B,GAA5B,EAAiC,MAAjC,EADM;IAAA,CAAP;AAAA,IAGA,SAAS,SAAC,GAAD,EAAM,MAAN;aACR,GAAG,CAAC,OAAJ,CAAY,gBAAZ,EAA8B,GAA9B,EAAmC,MAAnC,EADQ;IAAA,CAHT;AAAA,IAMA,SAAS,SAAC,GAAD,EAAM,MAAN;aACR,GAAG,CAAC,OAAJ,CAAY,gBAAZ,EAA8B,GAA9B,EAAmC,MAAnC,EADQ;IAAA,CANT;GADc,CAjBf;AAAA,EA2BA,IAAC,MAAD,EA3BA;AAAA,EA4BA,IAAC,OAAD,CAAQ;WACP,YAAY,CAAC,IAAb,GADO;EAAA,CAAR,CA5BA,CAD+B;AAAA,CAAhC","file":"/server/publications/filteredUsers.coffee.js","sourcesContent":["Meteor.publish 'filteredUsers', (filter) ->\n\tunless this.userId\n\t\treturn this.ready()\n\n\tif not _.isObject filter\n\t\treturn this.ready()\n\n\texp = new RegExp(s.escapeRegExp(filter.name), 'i')\n\n\toptions =\n\t\tfields:\n\t\t\tusername: 1\n\t\tsort:\n\t\t\tusername: 1\n\t\tlimit: 5\n\n\tpub = this\n\n\tcursorHandle = RocketChat.models.Users.findByActiveUsersUsernameExcept(exp, filter.except, options).observeChanges\n\t\tadded: (_id, record) ->\n\t\t\tpub.added('filtered-users', _id, record)\n\n\t\tchanged: (_id, record) ->\n\t\t\tpub.changed('filtered-users', _id, record)\n\n\t\tremoved: (_id, record) ->\n\t\t\tpub.removed('filtered-users', _id, record)\n\n\t@ready()\n\t@onStop ->\n\t\tcursorHandle.stop()\n\treturn\n"]}