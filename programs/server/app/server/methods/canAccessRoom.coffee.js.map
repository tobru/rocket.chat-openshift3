{"version":3,"sources":["meteor://ðŸ’»app/server/methods/canAccessRoom.coffee"],"names":[],"mappings":";;;;;;;;;AAAA,MAAM,CAAC,OAAP,CACC;AAAA,iBAAe,SAAC,GAAD,EAAM,MAAN;AACd;AAAA,WAAO,UAAU,CAAC,MAAM,CAAC,KAAK,CAAC,WAAxB,CAAoC,MAApC,EAA4C;AAAA,cAAQ;AAAA,kBAAU,CAAV;OAAR;KAA5C,CAAP;AAEA,yBAAO,IAAI,CAAE,kBAAb;AACC,YAAU,UAAM,CAAC,KAAP,CAAa,oBAAb,EAAmC,cAAnC,EAAmD;AAAA,QAAE,QAAQ,eAAV;OAAnD,CAAV,CADD;KAFA;AAKA;AACC,YAAU,UAAM,CAAC,KAAP,CAAa,oBAAb,EAAmC,cAAnC,EAAmD;AAAA,QAAE,QAAQ,eAAV;OAAnD,CAAV,CADD;KALA;AAAA,IAQA,OAAO,UAAU,CAAC,MAAM,CAAC,KAAK,CAAC,WAAxB,CAAoC,GAApC,CARP;AAUA,QAAG,IAAH;AACC,UAAG,UAAU,CAAC,KAAK,CAAC,aAAa,CAAC,IAA/B,CAAoC,IAApC,EAA0C,IAA1C,EAAgD,IAAhD,CAAH;AACC,YAAI,CAAC,QAAL,GAAgB,IAAI,CAAC,QAArB;AACA,eAAO,IAAP,CAFD;OAAA;AAIC,eAAO,KAAP,CAJD;OADD;KAAA;AAOC,YAAU,UAAM,CAAC,KAAP,CAAa,oBAAb,EAAmC,cAAnC,EAAmD;AAAA,QAAE,QAAQ,eAAV;OAAnD,CAAV,CAPD;KAXc;EAAA,CAAf;CADD","file":"/server/methods/canAccessRoom.coffee.js","sourcesContent":["Meteor.methods\n\tcanAccessRoom: (rid, userId) ->\n\t\tuser = RocketChat.models.Users.findOneById userId, fields: username: 1\n\n\t\tunless user?.username\n\t\t\tthrow new Meteor.Error 'error-invalid-user', 'Invalid user', { method: 'canAccessRoom' }\n\n\t\tunless rid\n\t\t\tthrow new Meteor.Error 'error-invalid-room', 'Invalid room', { method: 'canAccessRoom' }\n\n\t\troom = RocketChat.models.Rooms.findOneById rid\n\n\t\tif room\n\t\t\tif RocketChat.authz.canAccessRoom.call(this, room, user)\n\t\t\t\troom.username = user.username\n\t\t\t\treturn room\n\t\t\telse\n\t\t\t\treturn false\n\t\telse\n\t\t\tthrow new Meteor.Error 'error-invalid-room', 'Invalid room', { method: 'canAccessRoom' }\n"]}