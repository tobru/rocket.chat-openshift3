{"version":3,"sources":["meteor://ðŸ’»app/server/methods/deleteUser.coffee"],"names":[],"mappings":";;;;;;;;;AAAA,MAAM,CAAC,OAAP,CACC;AAAA,cAAY,SAAC,MAAD;AACX;AAAA,QAAG,OAAU,CAAC,MAAP,EAAP;AACC,YAAU,UAAM,CAAC,KAAP,CAAa,oBAAb,EAAmC,cAAnC,EAAmD;AAAA,QAAE,QAAQ,YAAV;OAAnD,CAAV,CADD;KAAA;AAAA,IAGA,OAAO,UAAU,CAAC,MAAM,CAAC,KAAK,CAAC,WAAxB,CAAoC,MAAM,CAAC,MAAP,EAApC,CAHP;AAKA,QAAO,UAAU,CAAC,KAAK,CAAC,aAAjB,CAA+B,MAAM,CAAC,MAAP,EAA/B,EAAgD,aAAhD,MAAkE,IAAzE;AACC,YAAU,UAAM,CAAC,KAAP,CAAa,mBAAb,EAAkC,aAAlC,EAAiD;AAAA,QAAE,QAAQ,YAAV;OAAjD,CAAV,CADD;KALA;AAAA,IAQA,OAAO,UAAU,CAAC,MAAM,CAAC,KAAK,CAAC,WAAxB,CAAoC,MAApC,CARP;AASA,QAAO,YAAP;AACC,YAAU,UAAM,CAAC,KAAP,CAAa,oBAAb,EAAmC,cAAnC,EAAmD;AAAA,QAAE,QAAQ,YAAV;OAAnD,CAAV,CADD;KATA;AAAA,IAYA,UAAU,CAAC,UAAX,CAAsB,MAAtB,CAZA;AAcA,WAAO,IAAP,CAfW;EAAA,CAAZ;CADD","file":"/server/methods/deleteUser.coffee.js","sourcesContent":["Meteor.methods\n\tdeleteUser: (userId) ->\n\t\tif not Meteor.userId()\n\t\t\tthrow new Meteor.Error 'error-invalid-user', \"Invalid user\", { method: 'deleteUser' }\n\n\t\tuser = RocketChat.models.Users.findOneById Meteor.userId()\n\n\t\tunless RocketChat.authz.hasPermission(Meteor.userId(), 'delete-user') is true\n\t\t\tthrow new Meteor.Error 'error-not-allowed', \"Not allowed\", { method: 'deleteUser' }\n\n\t\tuser = RocketChat.models.Users.findOneById userId\n\t\tunless user?\n\t\t\tthrow new Meteor.Error 'error-invalid-user', \"Invalid user\", { method: 'deleteUser' }\n\n\t\tRocketChat.deleteUser(userId)\n\n\t\treturn true\n"]}