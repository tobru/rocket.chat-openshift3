{"version":3,"sources":["meteor://ðŸ’»app/server/methods/registerUser.coffee"],"names":[],"mappings":";;;;;;;;;AAAA,MAAM,CAAC,OAAP,CACC;AAAA,gBAAc,SAAC,QAAD;AACb;AAAA,QAAG,UAAU,CAAC,QAAQ,CAAC,GAApB,CAAwB,2BAAxB,MAAwD,UAA3D;AACC,YAAU,UAAM,CAAC,KAAP,CAAa,kCAAb,EAAiD,+BAAjD,EAAkF;AAAA,QAAE,QAAQ,cAAV;OAAlF,CAAV,CADD;KAAA,MAGK,IAAG,UAAU,CAAC,QAAQ,CAAC,GAApB,CAAwB,2BAAxB,MAAwD,YAAxD,IAAyE,CAAC,SAAY,CAAC,SAAb,IAA0B,QAAQ,CAAC,SAAT,KAAwB,UAAU,CAAC,QAAQ,CAAC,GAApB,CAAwB,qCAAxB,CAAnD,CAA5E;AACJ,YAAU,UAAM,CAAC,KAAP,CAAa,gCAAb,EAA+C,kDAA/C,EAAmG;AAAA,QAAE,QAAQ,cAAV;OAAnG,CAAV,CADI;KAHL;AAAA,IAMA,UAAU,CAAC,mBAAX,CAA+B,QAAQ,CAAC,KAAxC,CANA;AAAA,IAQA,WACC;AAAA,aAAO,CAAC,CAAC,IAAF,CAAO,QAAQ,CAAC,KAAK,CAAC,WAAf,EAAP,CAAP;AAAA,MACA,UAAU,QAAQ,CAAC,IADnB;KATD;AAAA,IAYA,SAAS,QAAQ,CAAC,UAAT,CAAoB,QAApB,CAZT;AAAA,IAcA,UAAU,CAAC,MAAM,CAAC,KAAK,CAAC,OAAxB,CAAgC,MAAhC,EAAwC,CAAC,CAAC,IAAF,CAAO,QAAQ,CAAC,IAAhB,CAAxC,CAdA;AAgBA,QAAG,QAAQ,CAAC,KAAZ;AACC,cAAQ,CAAC,qBAAT,CAA+B,MAA/B,EAAuC,QAAQ,CAAC,KAAhD,EADD;KAhBA;AAmBA,WAAO,MAAP,CApBa;EAAA,CAAd;CADD","file":"/server/methods/registerUser.coffee.js","sourcesContent":["Meteor.methods\n\tregisterUser: (formData) ->\n\t\tif RocketChat.settings.get('Accounts_RegistrationForm') is 'Disabled'\n\t\t\tthrow new Meteor.Error 'error-user-registration-disabled', 'User registration is disabled', { method: 'registerUser' }\n\n\t\telse if RocketChat.settings.get('Accounts_RegistrationForm') is 'Secret URL' and (not formData.secretURL or formData.secretURL isnt RocketChat.settings.get('Accounts_RegistrationForm_SecretURL'))\n\t\t\tthrow new Meteor.Error 'error-user-registration-secret', 'User registration is only allowed via Secret URL', { method: 'registerUser' }\n\n\t\tRocketChat.validateEmailDomain(formData.email);\n\n\t\tuserData =\n\t\t\temail: s.trim(formData.email.toLowerCase())\n\t\t\tpassword: formData.pass\n\n\t\tuserId = Accounts.createUser userData\n\n\t\tRocketChat.models.Users.setName userId, s.trim(formData.name)\n\n\t\tif userData.email\n\t\t\tAccounts.sendVerificationEmail(userId, userData.email);\n\n\t\treturn userId\n"]}