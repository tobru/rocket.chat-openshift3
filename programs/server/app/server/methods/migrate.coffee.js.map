{"version":3,"sources":["meteor://ðŸ’»app/server/methods/migrate.coffee"],"names":[],"mappings":";;;;;;;;;AAAA,MAAM,CAAC,OAAP,CACC;AAAA,aAAW,SAAC,OAAD;AACV;AAAA,QAAG,OAAU,CAAC,MAAP,EAAP;AACC,YAAU,UAAM,CAAC,KAAP,CAAa,oBAAb,EAAmC,cAAnC,EAAmD;AAAA,QAAE,QAAQ,WAAV;OAAnD,CAAV,CADD;KAAA;AAAA,IAGA,OAAO,MAAM,CAAC,IAAP,EAHP;AAKA,QAAO,cAAJ,IAAa,UAAU,CAAC,KAAK,CAAC,aAAjB,CAA+B,IAAI,CAAC,GAApC,EAAyC,eAAzC,MAA+D,IAA/E;AACC,YAAU,UAAM,CAAC,KAAP,CAAa,mBAAb,EAAkC,aAAlC,EAAiD;AAAA,QAAE,QAAQ,WAAV;OAAjD,CAAV,CADD;KALA;AAAA,IAQA,IAAI,CAAC,OAAL,EARA;AAAA,IASA,UAAU,CAAC,UAAU,CAAC,SAAtB,CAAgC,OAAhC,CATA;AAUA,WAAO,OAAP,CAXU;EAAA,CAAX;AAAA,EAaA,qBAAqB;AACpB,QAAG,OAAU,CAAC,MAAP,EAAP;AACC,YAAU,UAAM,CAAC,KAAP,CAAa,oBAAb,EAAmC,cAAnC,EAAmD;AAAA,QAAE,QAAQ,qBAAV;OAAnD,CAAV,CADD;KAAA;AAGA,WAAO,UAAU,CAAC,UAAU,CAAC,UAAtB,EAAP,CAJoB;EAAA,CAbrB;CADD","file":"/server/methods/migrate.coffee.js","sourcesContent":["Meteor.methods\n\tmigrateTo: (version) ->\n\t\tif not Meteor.userId()\n\t\t\tthrow new Meteor.Error 'error-invalid-user', 'Invalid user', { method: 'migrateTo' }\n\n\t\tuser = Meteor.user()\n\n\t\tif not user? or RocketChat.authz.hasPermission(user._id, 'run-migration') isnt true\n\t\t\tthrow new Meteor.Error 'error-not-allowed', 'Not allowed', { method: 'migrateTo' }\n\n\t\tthis.unblock()\n\t\tRocketChat.Migrations.migrateTo version\n\t\treturn version\n\n\tgetMigrationVersion: ->\n\t\tif not Meteor.userId()\n\t\t\tthrow new Meteor.Error 'error-invalid-user', 'Invalid user', { method: 'getMigrationVersion' }\n\n\t\treturn RocketChat.Migrations.getVersion()\n"]}