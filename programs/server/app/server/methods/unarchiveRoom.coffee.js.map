{"version":3,"sources":["meteor://ðŸ’»app/server/methods/unarchiveRoom.coffee"],"names":[],"mappings":";;;;;;;;;AAAA,MAAM,CAAC,OAAP,CACC;AAAA,iBAAe,SAAC,GAAD;AACd;AAAA,QAAG,OAAU,CAAC,MAAP,EAAP;AACC,YAAU,UAAM,CAAC,KAAP,CAAa,oBAAb,EAAmC,cAAnC,EAAmD;AAAA,QAAE,QAAQ,eAAV;OAAnD,CAAV,CADD;KAAA;AAAA,IAGA,OAAO,UAAU,CAAC,MAAM,CAAC,KAAK,CAAC,WAAxB,CAAoC,GAApC,CAHP;AAKA;AACC,YAAU,UAAM,CAAC,KAAP,CAAa,oBAAb,EAAmC,cAAnC,EAAmD;AAAA,QAAE,QAAQ,eAAV;OAAnD,CAAV,CADD;KALA;AAQA,mBAAiB,CAAC,KAAK,CAAC,aAAjB,CAA+B,MAAM,CAAC,MAAP,EAA/B,EAAgD,gBAAhD,EAAkE,IAAI,CAAC,GAAvE,CAAP;AACC,YAAU,UAAM,CAAC,KAAP,CAAa,sBAAb,EAAqC,gBAArC,EAAuD;AAAA,QAAE,QAAQ,eAAV;OAAvD,CAAV,CADD;KARA;AAAA,IAWA,UAAU,CAAC,MAAM,CAAC,KAAK,CAAC,aAAxB,CAAsC,GAAtC,CAXA;AAaA;AAAA;SAAA;wBAAA;AACC,eAAS,UAAU,CAAC,MAAM,CAAC,KAAK,CAAC,iBAAxB,CAA0C,QAA1C,EAAoD;AAAA,QAAE,QAAQ;AAAA,UAAE,UAAU,CAAZ;SAAV;OAApD,CAAT;AACA,UAAO,cAAP;AACC,iBADD;OADA;AAAA,mBAIA,UAAU,CAAC,MAAM,CAAC,aAAa,CAAC,0BAAhC,CAA2D,GAA3D,EAAgE,MAAM,CAAC,GAAvE,EAJA,CADD;AAAA;mBAdc;EAAA,CAAf;CADD","file":"/server/methods/unarchiveRoom.coffee.js","sourcesContent":["Meteor.methods\n\tunarchiveRoom: (rid) ->\n\t\tif not Meteor.userId()\n\t\t\tthrow new Meteor.Error 'error-invalid-user', 'Invalid user', { method: 'unarchiveRoom' }\n\n\t\troom = RocketChat.models.Rooms.findOneById rid\n\n\t\tunless room\n\t\t\tthrow new Meteor.Error 'error-invalid-room', 'Invalid room', { method: 'unarchiveRoom' }\n\n\t\tunless RocketChat.authz.hasPermission(Meteor.userId(), 'unarchive-room', room._id)\n\t\t\tthrow new Meteor.Error 'error-not-authorized', 'Not authorized', { method: 'unarchiveRoom' }\n\n\t\tRocketChat.models.Rooms.unarchiveById rid\n\n\t\tfor username in room.usernames\n\t\t\tmember = RocketChat.models.Users.findOneByUsername(username, { fields: { username: 1 }})\n\t\t\tif not member?\n\t\t\t\tcontinue\n\n\t\t\tRocketChat.models.Subscriptions.unarchiveByRoomIdAndUserId rid, member._id\n"]}