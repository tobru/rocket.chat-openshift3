{"version":3,"sources":["meteor://ðŸ’»app/server/startup/i18n-validation.coffee"],"names":[],"mappings":";;;;;;;;;AAAA;;AAAA,OAAO,SAAC,GAAD,EAAM,MAAN,EAAmB,IAAnB;AACN;;IADY,SAAS;GACrB;;IADyB,OAAO;GAChC;AAAA;qBAAA;AACC,QAAG,CAAC,CAAC,QAAF,CAAW,KAAX,CAAH;AACC,WAAK,KAAL,EAAY,MAAZ,EAAoB,MAAM,GAA1B,EADD;KAAA;AAGC,YAAO,QAAO,GAAP,CAAP,GAAqB,KAArB,CAHD;KADD;AAAA;AAMA,SAAO,MAAP,CAPM;AAAA,CAAP;;AAAA,MAUM,CAAC,OAAP,CAAe;AACd;AAAA;AAAA,EACA,IAAI,EADJ;AAAA,EAEA,OAAO,EAFP;AAAA,EAGA,SAAS,EAHT;AAAA,EAKA,QAAQ,MAAM,CAAC,IAAP,CAAY,UAAU,CAAC,OAAO,CAAC,QAA/B,CALR;AAMA;AAAA;sBAAA;AACC,KAAE,MAAF,GAAU,KAAK,KAAL,CAAV;AACA;AAAA;wBAAA;;QACC,IAAK,QAAQ;OAAb;AAAA,MACA,IAAK,KAAI,CAAC,IAAV,CAAe,IAAf,CADA,CADD;AAAA,KAFD;AAAA,GANA;AAAA,EAYA,MAAM,CAZN;AAaA;wBAAA;UAA8B,OAAO,CAAC,MAAR,KAAoB,KAAK,CAAC;;KACvD;AAAA,YAAQ,CAAE,CAAC,CAAC,CAAC,UAAF,CAAa,KAAb,EAAoB,OAApB,CAA4B,CAAC,IAA7B,CAAkC,GAAlC,CAAD,IAAwC,4BAA1C,CAAqE,CAAC,GAAtE,GAA4E,GAAG,CAAC,KAAhF,GAAwF,oBAAgB,CAAC,OAAO,CAAC,IAAR,CAAa,GAAb,CAAD,CAAhB,GAAmC,GAAnC,CAAqC,CAAC,GAAtI;AAAA,IACA,MAAM,CAAC,IAAP,CAAY,KAAZ,CADA;AAEA,QAAG,KAAK,CAAC,MAAN,GAAe,GAAlB;AACC,YAAM,KAAK,CAAC,MAAZ,CADD;KAHD;AAAA,GAbA;AAmBA,MAAG,MAAM,CAAC,MAAP,GAAgB,CAAnB;AACC,WAAO,CAAC,GAAR,CAAY,GAAG,CAAC,GAAJ,GAAU,CAAC,CAAC,IAAF,CAAO,EAAP,EAAW,MAAM,EAAjB,EAAqB,GAArB,CAAyB,CAAC,GAApC,GAA0C,GAAG,CAAC,GAA1D;AACA;wBAAA;AACC,aAAO,CAAC,GAAR,CAAY,GAAG,CAAC,GAAhB,EAAqB,CAAC,CAAC,IAAF,CAAO,KAAG,KAAV,EAAmB,GAAnB,CAAuB,CAAC,GAA7C,EAAmD,GAAG,CAAC,GAAvD,EADD;AAAA,KADA;WAGA,OAAO,CAAC,GAAR,CAAY,GAAG,CAAC,GAAJ,GAAU,CAAC,CAAC,IAAF,CAAO,EAAP,EAAW,MAAM,EAAjB,EAAqB,GAArB,CAAyB,CAAC,GAApC,GAA0C,GAAG,CAAC,GAA1D,EAJD;GApBc;AAAA,CAAf,CAVA","file":"/server/startup/i18n-validation.coffee.js","sourcesContent":["flat = (obj, newObj = {}, path = '') ->\n\tfor key, value of obj\n\t\tif _.isObject value\n\t\t\tflat value, newObj, key + '.'\n\t\telse\n\t\t\tnewObj[path + key] = value\n\n\treturn newObj\n\n\nMeteor.startup ->\n\treturn\n\tl = {}\n\tkeys = {}\n\terrors = []\n\n\tlangs = Object.keys TAPi18next.options.resStore\n\tfor lang, value of TAPi18next.options.resStore\n\t\tl[lang] = flat value\n\t\tfor key, value of l[lang]\n\t\t\tkeys[key] ?= []\n\t\t\tkeys[key].push lang\n\n\tlen = 0\n\tfor key, present of keys when present.length isnt langs.length\n\t\terror = \"#{_.difference(langs, present).join(',')}: missing translation for \".red + key.white + \". Present in [#{present.join(',')}]\".red\n\t\terrors.push error\n\t\tif error.length > len\n\t\t\tlen = error.length\n\n\tif errors.length > 0\n\t\tconsole.log \"+\".red + s.rpad('', len - 28, '-').red + \"+\".red\n\t\tfor error in errors\n\t\t\tconsole.log \"|\".red, s.rpad(\"#{error}\", len).red,  \"|\".red\n\t\tconsole.log \"+\".red + s.rpad('', len - 28, '-').red + \"+\".red"]}