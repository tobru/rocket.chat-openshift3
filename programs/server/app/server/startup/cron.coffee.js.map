{"version":3,"sources":["meteor://ðŸ’»app/server/startup/cron.coffee"],"names":[],"mappings":";;;;;;;;;AACA;;AAAA,SAAa,WAAO,YAAP,CAAb;;AAAA,UAEU,CAAC,MAAX,CACC;AAAA,UAAQ,SAAC,IAAD;WACP,MAAO,KAAI,CAAC,KAAL,CAAW,CAAC,IAAnB,CAAwB,MAAxB,EAAgC,IAAI,CAAC,OAArC,EADO;EAAA,CAAR;AAAA,EAEA,gBAAgB,yBAFhB;CADD,CAFA;;AAAA,kBAOA,GAAqB;AACpB;AAAA,eAAa,UAAU,CAAC,UAAU,CAAC,IAAtB,EAAb;AAAA,EACA,UAAU,CAAC,IAAX,GAAkB,MAAM,CAAC,WAAP,EADlB;AAEA,MAAG,UAAU,CAAC,QAAQ,CAAC,GAApB,CAAwB,sBAAxB,CAAH;AACC,QAAI,CAAC,IAAL,CAAU,2BAAV,EACC;AAAA,YAAM,UAAN;KADD,EADD;GAHoB;AAAA,CAPrB;;AAAA,MAeM,CAAC,OAAP,CAAe;SACd,MAAM,CAAC,KAAP,CAAa;AACZ;AAAA,IAGA,UAAU,CAAC,GAAX,CACC;AAAA,YAAM,8BAAN;AAAA,MACA,UAAU,SAAC,MAAD;AACT,eAAO,MAAM,CAAC,IAAP,CAAY,cAAZ,CAAP,CADS;MAAA,CADV;AAAA,MAGA,KAAK,kBAHL;KADD,CAHA;WASA,UAAU,CAAC,KAAX,GAVY;EAAA,CAAb,EADc;AAAA,CAAf,CAfA","file":"/server/startup/cron.coffee.js","sourcesContent":["# Config and Start SyncedCron\nlogger = new Logger 'SyncedCron'\n\nSyncedCron.config\n\tlogger: (opts) ->\n\t\tlogger[opts.level].call(logger, opts.message)\n\tcollectionName: 'rocketchat_cron_history'\n\ngenerateStatistics = ->\n\tstatistics = RocketChat.statistics.save()\n\tstatistics.host = Meteor.absoluteUrl()\n\tif RocketChat.settings.get 'Statistics_reporting'\n\t\tHTTP.post 'https://rocket.chat/stats',\n\t\t\tdata: statistics\n\treturn\n\nMeteor.startup ->\n\tMeteor.defer ->\n\t\tgenerateStatistics()\n\n\t\t# Generate and save statistics every hour\n\t\tSyncedCron.add\n\t\t\tname: 'Generate and save statistics',\n\t\t\tschedule: (parser) -># parser is a later.parse object\n\t\t\t\treturn parser.text 'every 1 hour'\n\t\t\tjob: generateStatistics\n\n\t\tSyncedCron.start()\n"]}