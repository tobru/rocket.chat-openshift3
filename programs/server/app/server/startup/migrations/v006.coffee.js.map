{"version":3,"sources":["meteor://ðŸ’»app/server/startup/migrations/v006.coffee"],"names":[],"mappings":";;;;;;;;;AAAA,UAAU,CAAC,UAAU,CAAC,GAAtB,CACC;AAAA,WAAS,CAAT;AAAA,EACA,IAAI;AAEH;AAAA,WAAO,CAAC,GAAR,CAAY,0DAAZ;AAAA,IACA,OAAO,UAAU,CAAC,MAAM,CAAC,KAAK,CAAC,aAAxB,CAAsC,SAAtC,CADP;AAEA,wBAAG,IAAI,CAAE,aAAN,KAAa,UAAhB;AACC,gBAAU,CAAC,MAAM,CAAC,aAAa,CAAC,MAAhC,CAAuC;AAAA,QAAC,OAAM,IAAI,CAAC,GAAZ;OAAvC,EAAwD;AAAA,QAAC,QAAO;AAAA,UAAC,OAAM,SAAP;SAAR;OAAxD,EAAmF;AAAA,QAAC,SAAQ,CAAT;OAAnF;AAAA,MACA,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,MAA3B,CAAkC;AAAA,QAAC,OAAM,IAAI,CAAC,GAAZ;OAAlC,EAAmD;AAAA,QAAC,QAAO;AAAA,UAAC,OAAM,SAAP;SAAR;OAAnD,EAA8E;AAAA,QAAC,SAAQ,CAAT;OAA9E,CADA;AAAA,MAEA,UAAU,CAAC,MAAM,CAAC,KAAK,CAAC,UAAxB,CAAmC,IAAI,CAAC,GAAxC,CAFA;AAAA,MAGA,WAAW,CAAC,GAHZ;AAAA,MAIA,UAAU,CAAC,MAAM,CAAC,KAAK,CAAC,MAAxB,CAA+B;AAAA,QAAC,OAAM,SAAP;OAA/B,EAAiD;AAAA,QAAC,MAAM,IAAP;OAAjD,CAJA,CADD;KAFA;WAUA,OAAO,CAAC,GAAR,CAAY,KAAZ,EAZG;EAAA,CADJ;CADD","file":"/server/startup/migrations/v006.coffee.js","sourcesContent":["RocketChat.Migrations.add\n\tversion: 6\n\tup: ->\n\n\t\tconsole.log 'Changin _id of #general channel room from XXX to GENERAL'\n\t\troom = RocketChat.models.Rooms.findOneByName('general')\n\t\tif room?._id is not 'GENERAL'\n\t\t\tRocketChat.models.Subscriptions.update({'rid':room._id},{'$set':{'rid':'GENERAL'}},{'multi':1})\n\t\t\tRocketChat.models.Messages.update({'rid':room._id},{'$set':{'rid':'GENERAL'}},{'multi':1})\n\t\t\tRocketChat.models.Rooms.removeById(room._id)\n\t\t\tdelete room._id\n\t\t\tRocketChat.models.Rooms.upsert({'_id':'GENERAL'},{$set: room})\n\n\n\t\tconsole.log 'End'\n"]}