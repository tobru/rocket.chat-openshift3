{"version":3,"sources":["meteor://ðŸ’»app/server/startup/migrations/v014.coffee"],"names":[],"mappings":";;;;;;;;;AAAA,UAAU,CAAC,UAAU,CAAC,GAAtB,CACC;AAAA,WAAS,EAAT;AAAA,EACA,IAAI;AAEH;AAAA,cAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,MAA3B,CAAkC;AAAA,MAAE,KAAK,eAAP;KAAlC;AAAA,IACA,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,MAA3B,CAAkC;AAAA,MAAE,KAAK,cAAP;KAAlC,CADA;AAAA,IAGA,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,MAA3B,CAAkC;AAAA,MAAE,KAAK,cAAP;KAAlC,CAHA;AAAA,IAIA,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,MAA3B,CAAkC;AAAA,MAAE,KAAK,gBAAP;KAAlC,CAJA;AAAA,IAKA,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,MAA3B,CAAkC;AAAA,MAAE,KAAK,2BAAP;KAAlC,CALA;AAAA,IAOA,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,MAA3B,CAAkC;AAAA,MAAE,KAAK,0BAAP;KAAlC,EAAuE;AAAA,MAAE,MAAM;AAAA,QAAE,MAAM,SAAR;AAAA,QAAmB,OAAO,IAA1B;OAAR;KAAvE,CAPA;AAAA,IAQA,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,MAA3B,CAAkC;AAAA,MAAE,KAAK,2BAAP;KAAlC,EAAwE;AAAA,MAAE,MAAM;AAAA,QAAE,MAAM,SAAR;AAAA,QAAmB,OAAO,KAA1B;OAAR;KAAxE,CARA;AAAA,IAUA,WAAW;MACV;AAAA,eAAO,eAAP;AAAA,QACA,OAAO,eADP;OADU,EAIV;AAAA,eAAO,gBAAP;AAAA,QACA,OAAO,gBADP;OAJU,EAOV;AAAA,eAAO,aAAP;AAAA,QACA,OAAO,aADP;OAPU,EAUV;AAAA,eAAO,+BAAP;AAAA,QACA,OAAO,+BADP;OAVU,EAaV;AAAA,eAAO,oBAAP;AAAA,QACA,OAAO,mBADP;OAbU;KAVX;AA2BA;8BAAA;AACC;;uBAAmE,CAAE,cAArE;AAAA,MACA;;wBAAmE,CAAE,cADrE;AAEA,UAAG,sBAAkB,kBAArB;AACC,kBAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,MAA3B,CAAkC;AAAA,UAAE,KAAK,SAAS,CAAC,KAAD,CAAhB;SAAlC,EAA0D;AAAA,UAAE,MAAM;AAAA,YAAE,OAAO,QAAT;WAAR;SAA1D,EADD;OAFA;AAAA,MAKA,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,MAA3B,CAAkC;AAAA,QAAE,KAAK,SAAS,CAAC,GAAjB;OAAlC,CALA,CADD;AAAA,KA3BA;WAoCA,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,MAA3B,CAAkC;AAAA,MAAE,KAAK,eAAP;KAAlC,EAtCG;EAAA,CADJ;CADD","file":"/server/startup/migrations/v014.coffee.js","sourcesContent":["RocketChat.Migrations.add\n\tversion: 14\n\tup: ->\n\t\t# Remove unused settings\n\t\tRocketChat.models.Settings.remove { _id: \"API_Piwik_URL\" }\n\t\tRocketChat.models.Settings.remove { _id: \"API_Piwik_ID\" }\n\n\t\tRocketChat.models.Settings.remove { _id: \"Message_Edit\" }\n\t\tRocketChat.models.Settings.remove { _id: \"Message_Delete\" }\n\t\tRocketChat.models.Settings.remove { _id: \"Message_KeepStatusHistory\" }\n\n\t\tRocketChat.models.Settings.update { _id: \"Message_ShowEditedStatus\" }, { $set: { type: \"boolean\", value: true } }\n\t\tRocketChat.models.Settings.update { _id: \"Message_ShowDeletedStatus\" }, { $set: { type: \"boolean\", value: false } }\n\n\t\tmetaKeys = [\n\t\t\t'old': 'Meta:language'\n\t\t\t'new': 'Meta_language'\n\t\t,\n\t\t\t'old': 'Meta:fb:app_id'\n\t\t\t'new': 'Meta_fb_app_id'\n\t\t,\n\t\t\t'old': 'Meta:robots'\n\t\t\t'new': 'Meta_robots'\n\t\t,\n\t\t\t'old': 'Meta:google-site-verification'\n\t\t\t'new': 'Meta_google-site-verification'\n\t\t,\n\t\t\t'old': 'Meta:msvalidate.01'\n\t\t\t'new': 'Meta_msvalidate01'\n\t\t]\n\n\t\tfor oldAndNew in metaKeys\n\t\t\toldValue = RocketChat.models.Settings.findOne({_id: oldAndNew.old})?.value\n\t\t\tnewValue = RocketChat.models.Settings.findOne({_id: oldAndNew.new})?.value\n\t\t\tif oldValue? and not newValue?\n\t\t\t\tRocketChat.models.Settings.update { _id: oldAndNew.new }, { $set: { value: newValue } }\n\n\t\t\tRocketChat.models.Settings.remove { _id: oldAndNew.old }\n\n\n\t\tRocketChat.models.Settings.remove { _id: \"SMTP_Security\" }\n"]}