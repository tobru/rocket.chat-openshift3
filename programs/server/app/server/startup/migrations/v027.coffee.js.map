{"version":3,"sources":["meteor://ðŸ’»app/server/startup/migrations/v027.coffee"],"names":[],"mappings":";;;;;;;;;AAAA,UAAU,CAAC,UAAU,CAAC,GAAtB,CACC;AAAA,WAAS,EAAT;AAAA,EACA,IAAI;AACH,cAAU,CAAC,MAAM,CAAC,KAAK,CAAC,MAAxB,CAA+B,EAA/B,EAAmC;AAAA,MAAE,SAAS;AAAA,QAAE,OAAO,QAAT;OAAX;KAAnC,EAAqE;AAAA,MAAE,OAAO,IAAT;KAArE;AAAA,IAEA,UAAU,CAAC,MAAM,CAAC,KAAK,CAAC,IAAxB,CAA6B;AAAA,MAAE,QAAQ;AAAA,QAAE,SAAS,CAAX;OAAV;KAA7B,CAAwD,CAAC,OAAzD,CAAiE,SAAC,IAAD;AAChE;AAAA;AAAA;WAAA;2BAAA;AACC,+BAAU,CAAC,MAAM,CAAC,KAAK,CAAC,YAAxB,CAAqC,IAAI,CAAC,GAA1C,EAA+C,KAA/C,EAAsD,KAAtD,GADD;AAAA;qBADgE;IAAA,CAAjE,CAFA;WAMA,UAAU,CAAC,MAAM,CAAC,KAAK,CAAC,MAAxB,CAA+B,EAA/B,EAAmC;AAAA,MAAE,QAAQ;AAAA,QAAE,QAAQ,CAAV;OAAV;KAAnC,EAA8D;AAAA,MAAE,OAAO,IAAT;KAA9D,EAPG;EAAA,CADJ;CADD","file":"/server/startup/migrations/v027.coffee.js","sourcesContent":["RocketChat.Migrations.add\n\tversion: 27\n\tup: ->\n\t\tRocketChat.models.Users.update({}, { $rename: { roles: '_roles' } }, { multi: true })\n\n\t\tRocketChat.models.Users.find({ _roles: { $exists: 1 } }).forEach (user) ->\n\t\t\tfor scope, roles of user._roles\n\t\t\t\tRocketChat.models.Roles.addUserRoles(user._id, roles, scope)\n\n\t\tRocketChat.models.Users.update({}, { $unset: { _roles: 1 } }, { multi: true })\n"]}