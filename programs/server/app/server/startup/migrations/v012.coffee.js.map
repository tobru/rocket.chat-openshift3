{"version":3,"sources":["meteor://ğŸ’»app/server/startup/migrations/v012.coffee"],"names":[],"mappings":";;;;;;;;;AAAA,UAAU,CAAC,UAAU,CAAC,GAAtB,CACC;AAAA,WAAS,EAAT;AAAA,EACA,IAAI;AAEH;AAAA,YAAQ,UAAU,CAAC,MAAM,CAAC,KAAK,CAAC,YAAxB,CAAqC,IAArC,EAA2C;AAAA,MAAE,QAAQ;AAAA,QAAE,KAAK,CAAP;OAAV;KAA3C,CAAR;AACA;AAEC,mBAAa,UAAU,CAAC,MAAM,CAAC,KAAK,CAAC,OAAxB,CAAgC,EAAhC,EAAoC;AAAA,QAAE,QAAQ;AAAA,UAAE,UAAU,CAAZ;SAAV;AAAA,QAA2B,MAAM;AAAA,UAAC,WAAW,CAAZ;SAAjC;OAApC,CAAb;AACA,UAAG,UAAH;AACC,cAAM,CAAC,KAAK,CAAC,MAAb,CAAoB;AAAA,UAAC,KAAK,UAAU,CAAC,GAAjB;SAApB,EAA2C;AAAA,UAAC,MAAM;AAAA,YAAC,OAAO,IAAR;WAAP;SAA3C;eAEA,OAAO,CAAC,GAAR,CAAY,SAAO,UAAU,CAAC,QAAlB,GAA2B,qCAAvC,EAHD;OAHD;KAHG;EAAA,CADJ;CADD","file":"/server/startup/migrations/v012.coffee.js","sourcesContent":["RocketChat.Migrations.add\n\tversion: 12\n\tup: ->\n\t\t# Set oldest user as admin, if none exists yet\n\t\tadmin = RocketChat.models.Users.findOneAdmin true, { fields: { _id: 1 } }\n\t\tunless admin\n\t\t\t# get oldest user\n\t\t\toldestUser = RocketChat.models.Users.findOne({}, { fields: { username: 1 }, sort: {createdAt: 1}})\n\t\t\tif oldestUser\n\t\t\t\tMeteor.users.update {_id: oldestUser._id}, {$set: {admin: true}}\n\n\t\t\t\tconsole.log \"Set #{oldestUser.username} as admin for being the oldest user\"\n"]}