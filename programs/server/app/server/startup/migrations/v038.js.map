{"version":3,"sources":["meteor://ðŸ’»app/server/startup/migrations/v038.js"],"names":[],"mappings":";;;;;;;;AAAA,UAAU,CAAC,UAAU,CAAC,GAAG,CAAC;AACzB,QAAO,EAAE,EAAE;AACX,GAAE,EAAE,YAAW;AACd,MAAI,UAAU,IAAI,UAAU,CAAC,QAAQ,IAAI,UAAU,CAAC,QAAQ,CAAC,GAAG,EAAE;AACjE,OAAI,YAAY,GAAG,UAAU,CAAC,QAAQ,CAAC,GAAG,CAAC,8BAA8B,CAAC,CAAC;;;AAG3E,OAAI,YAAY,EAAE;AACjB,QAAI,UAAU,CAAC,MAAM,IAAI,UAAU,CAAC,MAAM,CAAC,WAAW,EAAE;AACvD,eAAU,CAAC,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,EAAE,GAAG,EAAE,aAAa,EAAE,EAAE,EAAE,SAAS,EAAE,EAAE,KAAK,EAAE,MAAM,EAAE,EAAE,CAAC,CAAC;KAC/F;IACD;GACD;EACD;CACD,CAAC,CAAC,sE","file":"/server/startup/migrations/v038.js","sourcesContent":["RocketChat.Migrations.add({\n\tversion: 38,\n\tup: function() {\n\t\tif (RocketChat && RocketChat.settings && RocketChat.settings.get) {\n\t\t\tvar allowPinning = RocketChat.settings.get('Message_AllowPinningByAnyone');\n\n\t\t\t// If public pinning was allowed, add pinning permissions to 'users', else leave it to 'owners' and 'moderators'\n\t\t\tif (allowPinning) {\n\t\t\t\tif (RocketChat.models && RocketChat.models.Permissions) {\n\t\t\t\t\tRocketChat.models.Permissions.update({ _id: 'pin-message' }, { $addToSet: { roles: 'user' } });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});\n"]}